
<mat-dialog-actions align="end">
    <button class="btn btn-danger" mat-dialog-close>X</button>
</mat-dialog-actions>



<h2 style="text-align:center" mat-dialog-title>Patient File</h2>
<br />
<hr />
<!--  -->
<div class="form-group ">
    <div class="col-md-12">
        <mat-form-field class="example-full-width" appearance="fill">
            <mat-label>Office Procedure</mat-label>
            <input type="text"
                   placeholder="Pick one"
                   aria-label="Number"
                   matInput
                   (click)="search()"
                   [formControl]="myControl"
                   [matAutocomplete]="auto"
                   [ngClass]="{ 'is-invalid': submitted && officeProcedureRequired }">
            <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                    {{option}}
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>
    </div>

    <div class="col-md-4">
        <label>Quantity <span class="glyphicon glyphicon-exclamation-sign helpStyle"> </span> <b class="helpStyle">العدد</b> </label>
        <input [(ngModel)]="patientFile.Qty"
               [ngClass]="{ 'is-invalid': submitted && qtyRequired }"
               placeholder="0" class="form-control" type="number" />
    </div>
    <div class="col-md-4">
        <label>Price <span class="glyphicon glyphicon-exclamation-sign helpStyle"> </span> <b class="helpStyle">السعر</b> </label>
        <input [(ngModel)]="patientFile.Price"
               [ngClass]="{ 'is-invalid': submitted && priceRequired }"
               placeholder="0.0 JOD" class="form-control" type="number" />
    </div>
    <div class="col-md-4">

        <label>Tooth <span class="glyphicon glyphicon-exclamation-sign helpStyle"> </span> <b class="helpStyle"> رقم السن</b> </label>
        <input [(ngModel)]="patientFile.ToothCode"
               [ngClass]="{ 'is-invalid': submitted && toothCodeRequired }"
               min="1" max="32"
               placeholder="0" class="form-control" type="number" />
    </div>


    <div class="m-">
        <img class="mt-5" src="http://localhost/DentalClinicSystem/Images/teeth.jpeg" usemap="#image-map">
        <!-- Image Map Generated by http://www.image-map.net/ -->
        <map name="image-map">
            <area style="cursor: pointer;" (click)="settoothCode(1)" coords="616,121,644,1" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(2)" coords="576,126,604,0" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(3)" coords="533,125,568,0" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(4)" coords="524,0,496,125" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(5)" coords="453,124,488,3" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(6)" coords="416,133,445,0,430,14" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(7)" coords="408,0,379,136" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(8)" coords="329,133,367,5" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(9)" coords="311,3,280,137" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(10)" coords="273,2,241,129" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(11)" coords="202,128,233,3" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(12)" coords="192,2,160,126" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(13)" coords="126,123,148,4" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(14)" coords="117,0,82,122" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(15)" coords="44,2,71,119" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(16)" coords="4,121,30,5" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(17)" coords="4,251,33,154" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(18)" coords="77,161,41,250" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(19)" coords="84,251,112,165" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(20)" coords="123,251,151,161" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(21)" coords="191,159,167,251" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(22)" coords="230,160,201,251" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(23)" coords="246,249,267,159" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(24)" coords="278,251,307,158" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(25)" coords="365,159,333,247" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(26)" coords="381,158,399,245" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(27)" coords="443,160,417,250" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(28)" coords="484,158,457,251" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(29)" coords="497,251,521,163" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(30)" coords="565,162,536,251" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(31)" coords="603,160,578,249" shape="rect">
            <area style="cursor: pointer;" (click)="settoothCode(32)" coords="618,250,639,161" shape="rect">
        </map>
    </div>

    <div class="col-md-6 mt-5">
        <label>Visit Date: <span class="glyphicon glyphicon-exclamation-sign helpStyle"> </span> <b class="helpStyle"> تاريخ الزيارة</b> </label>
        <input [(ngModel)]="patientFile.Date"
               placeholder="0.0 JOD" class="form-control" type="date" />
    </div>

    <div>
        <div class="col-md-6 mt-5">
            <label>Note: <span class="glyphicon glyphicon-exclamation-sign helpStyle"> </span> <b class="helpStyle"> اضافة ملاحظه </b> </label>
            <textarea [(ngModel)]="patientFile.Comment"
                      id="note" class="form-control" placeholder="Type here..."></textarea>
        </div>
    </div>
</div>

<br />
<br />
<!-- Table -->
<div class="col-md-12 mt-5">
    <ng-container *ngIf="patientFileRecords.length > 0">
        <table class="table table-striped">
            <tr>
                <th>Procedure</th>
                <th>Quantity </th>
                <th>Price </th>
                <th>Tooth Code</th>
                <th>Date</th>
                <th>Comment</th>
                <!--<th>Edit</th>-->
                <th>Delete</th>
            </tr>
            <tr *ngFor="let item of  patientFileRecords | paginate: { itemsPerPage: 3, currentPage: p }">
                <td>{{item.OfficeProcedure}}</td>
                <td>{{item.Qty}}</td>
                <td>{{item.Price}}</td>
                <td>{{item.ToothCode}}</td>
                <td>{{item.CreatedDate | date:'fullDate'}}</td>
                <td>{{item.Comment == null ? 'لا يوجد'  : item.Comment}}</td>
                <!--<td>
                    <a style="color: orange; cursor: pointer; ">
                        <span (click)="edit(item.Id)" class="glyphicon glyphicon-edit"></span>
                    </a>
                </td>-->
                <td align="center">
                    <a style="color: red; cursor: pointer;">
                        <span (click)="delete(item.Id)" class="glyphicon glyphicon-remove"></span>
                    </a>
                </td>
            </tr>
        </table>
        <pagination-controls style="text-align: center; padding:initial" [hidden]="patientFileRecords == 0" (pageChange)="p = $event"></pagination-controls>
    </ng-container>
</div>

<br />
<br />

<div class="col-md-12">
    <ng-container *ngIf="patientFileRecords.length == 0">
        <h4 style="color: orange; text-align: center; margin: revert">There are no records for this patient</h4>
    </ng-container>
</div>

<div class="col-md-12">
    <mat-dialog-actions>
        <input type="button" class="btn btn-success" (click)="onSubmit()" value="Save" />
        &nbsp;
        <button class="btn btn-warning" mat-dialog-close>Cancal</button>
    </mat-dialog-actions>
</div>
